B_aff <- occ(query = c('Bombus affinis'), from = c('bison', 'gbif', 'inat'))
#fixnames by query:
fng <- fixnames(B_aff, how="query")$gbif
fng_copy <- occ2df(fng)
fnb <- fixnames(B_aff, how="query")$bison
fnb_copy <- occ2df(fnb)
fni <- fixnames(B_aff, how="query")$inat
fni_copy <- occ2df(fni)
View(fnb_copy)
View(fng_copy)
View(fni_copy)
#Selecting Columns with fixed names:
final_bison <- fnb_copy[, c(13, 38, 40, 28, 3)]
View(final_bison)
View(fnb_copy)
#Selecting Columns with fixed names:
final_bison <- fnb_copy[, c(16, 27, 11, 3,45)]
View(final_bison)
View(fnb_copy)
View(fng_copy)
final_gbif <- fng_copy[, c(1, 3, 2, 39, 37)]
View(final_gbif)
View(fni_copy)
final_inat <- fni_copy[, c(57, 4, 5, 2, 23)]
View(final_inat)
#breaking apart observation dates to just get years:
inat_years <- strsplit(as.character(final_inat$observed_on), '-')
inat_years_df <- as.data.frame(inat_years, row.names = NULL, optional = FALSE,
cut.names = FALSE, col.names = names(inat_years), fix.empty.names = TRUE,
stringsAsFactors = default.stringsAsFactors())
tp <- data.frame(t(inat_years_df))
colnames(tp)[colnames(tp)=="X1"] <- "year"
colnames(tp)[colnames(tp)=="X2"] <- "month"
colnames(tp)[colnames(tp)=="X3"] <- "day"
#putting date columns back with final_inat:
final_inat$ID <- seq.int(nrow(final_inat))
tp$ID <- seq.int(nrow(tp))
final_inat <- merge(final_inat, tp, by = "ID")
View(final_inat)
final_inat <- as.data.frame(final_inat, row.names = NULL, optional = FALSE,
cut.names = FALSE, col.names = names(final_inat), fix.empty.names = TRUE,
stringsAsFactors = default.stringsAsFactors())
final_inat <- final_inat[, c(2, 3, 4, 5, 7)]
View(final_inat)
final_inat <- fni_copy[, c(57, 4, 5, 2, 23)]
#breaking apart observation dates to just get years:
inat_years <- strsplit(as.character(final_inat$observed_on), '-')
inat_years_df <- as.data.frame(inat_years, row.names = NULL, optional = FALSE,
cut.names = FALSE, col.names = names(inat_years), fix.empty.names = TRUE,
stringsAsFactors = default.stringsAsFactors())
View(inat_years_df)
tp <- data.frame(t(inat_years_df))
View(tp)
colnames(tp)[colnames(tp)=="X1"] <- "year"
colnames(tp)[colnames(tp)=="X2"] <- "month"
colnames(tp)[colnames(tp)=="X3"] <- "day"
#putting date columns back with final_inat:
final_inat$ID <- seq.int(nrow(final_inat))
tp$ID <- seq.int(nrow(tp))
final_inat <- merge(final_inat, tp, by = "ID")
View(final_inat)
final_inat <- as.data.frame(final_inat, row.names = NULL, optional = FALSE,
cut.names = FALSE, col.names = names(final_inat), fix.empty.names = TRUE,
stringsAsFactors = default.stringsAsFactors())
final_inat <- final_inat[, c(2, 3, 4, 7, 6)]
View(final_inat)
#Renaming iNAT columns:
colnames(final_inat)[colnames(final_inat)=="name"] <- "name"
colnames(final_inat)[colnames(final_inat)=="longitude"] <- "longitude"
colnames(final_inat)[colnames(final_inat)=="latitude"] <- "latitude"
colnames(final_inat)[colnames(final_inat)=="positional_accuracy"] <- "coordinateUncertaintyInMeters"
colnames(final_inat)[colnames(final_inat)=="year"] <- "year"
View(final_inat)
View(final_gbif)
View(final_bison)
#joining GBIF, BISON, and iNAT data frames:
gbif_bis_inat <- rbind(final_gbif,final_bison, final_inat)
#remove any lines with missing or unlikely coordinates (using scrubr)
B_affinis <- dframe(gbif_bis_inat) %>% coord_incomplete() %>% coord_unlikely()
#convert NAs to blanks:
B_affinis[is.na(B_affinis)] <- ""
#convert to numeric data:
B_char <- B_affinis
B_affinis[, 2:5] <- sapply(B_affinis[, 2:5], as.numeric)
#dat_1980 <- filter(B_affinis, year >= 1980)
dat_1980_2000 <- filter(B_affinis, year >= 1980 & coordinateUncertaintyInMeters <= 500)
View(dat_1980_2000)
#dat_1980 <- filter(B_affinis, year >= 1980)
dat_1980_500 <- filter(B_affinis, year >= 1980 & coordinateUncertaintyInMeters <= 500)
dat_1980_2000 <- filter(B_affinis, year >= 1980 & coordinateUncertaintyInMeters <= 2000)
View(dat_1980_2000)
#dat_1980 <- filter(B_affinis, year >= 1980)
data_1980_500 <- filter(B_affinis, year >= 1980 & coordinateUncertaintyInMeters <= 500)
data_1980_2000 <- filter(B_affinis, year >= 1980 & coordinateUncertaintyInMeters <= 2000)
View(dat_1980_500)
spatialtotal<-SpatialPointsDataFrame(data_1980_500[,2:3],
as.data.frame(data_1980_500[,c(1,4,5)]),
proj4string = CRS("+proj=longlat +datum=WGS84"))
newcrs<-CRS("+proj=robin +datum=WGS84")
spatialtotal2<-spTransform(spatialtotal,newcrs)
x <- split(spatialtotal2, list(spatialtotal2$name))
dup <- remove.duplicates(x[[1]],zero=500.0,remove.second=TRUE)
for (i in (2:length(x))) {
dups <- remove.duplicates(x[[i]],zero=500.0,remove.second=TRUE)
dup <- rbind(dups,dup)
}
dup
spatialtotal<-SpatialPointsDataFrame(data_1980_500[,2:3],
as.data.frame(data_1980_500[,c(1,4,5)]),
proj4string = CRS("+proj=longlat +datum=WGS84"))
newcrs<-CRS("+proj=robin +datum=WGS84")
spatialtotal2<-spTransform(spatialtotal,newcrs)
View(spatialtotal)
View(data_1980_500)
spatialtotal<-SpatialPointsDataFrame(data_1980_500[,2:3],
as.data.frame(data_1980_500[,c(1,4,5)]),
proj4string = CRS("+proj=longlat +datum=WGS84"))
newcrs<-CRS("+proj=robin +datum=WGS84")
spatialtotal<-SpatialPointsDataFrame(data_1980_500[,2:3],
as.data.frame(data_1980_500[,c(1,4,5)]),
proj4string = CRS("+proj=longlat +datum=WGS84"))
dup <- remove.duplicates(spatialtotal[[1]],zero=500.0,remove.second=TRUE)
View(data_1980_500)
B_affinis[, 2:5] <- sapply(B_affinis[, 2:5], as.numeric)
data_1980_500 <- filter(B_affinis, year >= 1980 & coordinateUncertaintyInMeters <= 500)
spatialtotal<-SpatialPointsDataFrame(data_1980_500[,2:3],
as.data.frame(data_1980_500[,c(1,4,5)]),
proj4string = CRS("+proj=longlat +datum=WGS84"))
newcrs<-CRS("+proj=robin +datum=WGS84")
spatialtotal2<-spTransform(spatialtotal,newcrs)
library(leaflet)
map_leaflet(data_1980_500, lon = "longitude", lat = "latitude", color = NULL,
size = 7)
map_leaflet(data_1980_500, lon = "longitude", lat = "latitude", color = "red",
size = 7)
write.csv("B_aff_test_data.csv")
write.csv(B_affinis, "B_aff_test_data.csv")
setwd("~/")
write.csv(B_affinis, "B_aff_test_data.csv")
read.csv("B_aff_test_data.csv")
B_affinis <- read.csv("B_aff_test_data.csv")
data_1980_500 <- filter(B_affinis, year >= 1980 & coordinateUncertaintyInMeters <= 500)
map_leaflet(data_1980_500, lon = "longitude", lat = "latitude", color = "red",
size = 7)
map_leaflet(data_1980_500, lon = "longitude", lat = "latitude", color = "red",
size = 7, addProviderTiles(providers$Esri.OceanBasemap))
B_aff_map <- leaflet() %>%
addTiles() %>%
addPolygons(data = data_1980_500) %>%
addProviderTiles(providers$Esri.OceanBasemap) %>%
B_aff_map <- leaflet() %>%
addTiles() %>%
addPolygons(data = data_1980_500) %>%
addProviderTiles(providers$Esri.OceanBasemap) %>%
B_aff_map
testr <- map_leaflet(data_1980_500, lon = "longitude", lat = "latitude", color = "red",
size = 7, addProviderTiles(providers$Esri.OceanBasemap))
B_aff_map <- leaflet(testr) %>%
addTiles() %>%
addProviderTiles(providers$Esri.OceanBasemap) %>%
B_aff_map <- leaflet(testr) %>%
addTiles() %>%
addProviderTiles(providers$Esri.OceanBasemap) %>%
B_aff_map
B_aff_map <- leaflet(data_1980_500) %>%
addTiles() %>%
addProviderTiles(providers$Esri.OceanBasemap) %>%
B_aff_map
B_aff_map <- leaflet(data_1980_500) %>%
addTiles() %>%
addProviderTiles(providers$Esri.OceanBasemap)
B_aff_map
B_aff_map <- leaflet(B_affinis) %>%
fitBounds(-125, 24 ,-75, 45) %>%
addCircles(~longitude, ~latitude, weight = 3, radius=40,
color="#ffa500", stroke = TRUE, fillOpacity = 0.8) %>%
addProviderTiles(providers$Esri.OceanBasemap)
B_aff_map
B_aff_map <- leaflet(B_affinis) %>%
fitBounds(-125, 24 ,-75, 45) %>%
addCircles(~longitude, ~latitude, weight = 3, radius=40,
color="blue", stroke = TRUE, fillOpacity = 0.8) %>%
addProviderTiles(providers$Esri.OceanBasemap)
B_aff_map
B_aff_map <- leaflet(B_affinis) %>%
fitBounds(-125, 24 ,-75, 45) %>%
addCircles(~longitude, ~latitude, weight = 4, radius=60,
color="blue", stroke = TRUE, fillOpacity = 0.8) %>%
addProviderTiles(providers$Esri.OceanBasemap)
B_aff_map
B_aff_map <- leaflet(B_affinis) %>%
fitBounds(-125, 24 ,-75, 45) %>%
addCircles(~longitude, ~latitude, weight = 4, radius=100,
color="blue", stroke = TRUE, fillOpacity = 0.8) %>%
addProviderTiles(providers$Esri.OceanBasemap)
B_aff_map
B_aff_map <- leaflet(B_affinis) %>%
fitBounds(-125, 24 ,-75, 45) %>%
addCircles(~longitude, ~latitude, weight = 8, radius=100,
color="blue", stroke = TRUE, fillOpacity = 0.8) %>%
addProviderTiles(providers$Esri.OceanBasemap)
B_aff_map
B_aff_map <- leaflet(B_affinis) %>%
fitBounds(-125, 24 ,-75, 45) %>%
addCircles(~longitude, ~latitude, weight = 5, radius=100,
color="blue", stroke = TRUE, fillOpacity = 0.8) %>%
addProviderTiles(providers$Esri.OceanBasemap)
B_aff_map <- leaflet(B_affinis) %>%
fitBounds(-125, 24 ,-75, 45) %>%
addCircles(~longitude, ~latitude, weight = 5, radius=100,
color="blue", stroke = TRUE, fillOpacity = 0.2) %>%
addProviderTiles(providers$Esri.OceanBasemap)
B_aff_map
B_aff_map <- leaflet(B_affinis) %>%
fitBounds(-125, 24 ,-75, 45) %>%
addCircles(~longitude, ~latitude, weight = 5, radius=100,
color="blue", stroke = TRUE, fillOpacity = 0) %>%
addProviderTiles(providers$Esri.OceanBasemap)
B_aff_map
B_aff_map <- leaflet(B_affinis) %>%
fitBounds(-125, 24 ,-75, 45) %>%
addCircles(~longitude, ~latitude, weight = 5, radius=100,
color="blue") %>%
addProviderTiles(providers$Esri.OceanBasemap)
B_aff_map
B_aff_map <- leaflet(B_affinis) %>%
fitBounds(-125, 24 ,-75, 45) %>%
addCircles(~longitude, ~latitude, weight = 5, radius=10, color="blue") %>%
addProviderTiles(providers$Esri.OceanBasemap)
B_aff_map
B_aff_map <- leaflet(B_affinis) %>%
fitBounds(-125, 24 ,-75, 45) %>%
addCircles(~longitude, ~latitude, color="blue") %>%
addProviderTiles(providers$Esri.OceanBasemap)
B_aff_map
map_leaflet(data_1980_500, lon = "longitude", lat = "latitude", color = "red",
size = 7, addProviderTiles(providers$Esri.OceanBasemap))
B_affinis <- read.csv("B_aff_test_data.csv")
data_1980_500 <- filter(B_affinis, year >= 1980 & coordinateUncertaintyInMeters <= 500)
B_aff_map <- leaflet(B_affinis) %>%
fitBounds(-125, 24 ,-75, 45) %>%
addCircles(~longitude, ~latitude, color="blue") %>%
addProviderTiles(providers$Esri.OceanBasemap)
B_aff_map
B_aff_map <- leaflet(B_affinis) %>%
fitBounds(-120, 24 ,-75, 45) %>%
addCircles(~longitude, ~latitude, color="blue") %>%
addProviderTiles(providers$Esri.OceanBasemap)
B_aff_map
B_aff_map <- leaflet(B_affinis) %>%
fitBounds(-115, 24 ,-75, 45) %>%
addCircles(~longitude, ~latitude, color="blue") %>%
addProviderTiles(providers$Esri.OceanBasemap)
B_aff_map
B_aff_map <- leaflet(B_affinis) %>%
fitBounds(-110, 24 ,-75, 45) %>%
addCircles(~longitude, ~latitude, color="blue") %>%
addProviderTiles(providers$Esri.OceanBasemap)
B_aff_map
B_aff_map <- leaflet(B_affinis) %>%
fitBounds(-90, 24 ,-75, 45) %>%
addCircles(~longitude, ~latitude, color="blue") %>%
addProviderTiles(providers$Esri.OceanBasemap)
B_aff_map
B_aff_map <- leaflet(B_affinis) %>%
fitBounds(-95, 24 ,-75, 45) %>%
addCircles(~longitude, ~latitude, color="blue") %>%
addProviderTiles(providers$Esri.OceanBasemap)
B_aff_map
B_aff_map <- leaflet(B_affinis) %>%
fitBounds(-95, 30 ,-75, 45) %>%
addCircles(~longitude, ~latitude, color="blue") %>%
addProviderTiles(providers$Esri.OceanBasemap)
B_aff_map
B_aff_map <- leaflet(B_affinis) %>%
fitBounds(-95, 40 ,-75, 45) %>%
addCircles(~longitude, ~latitude, color="blue") %>%
addProviderTiles(providers$Esri.OceanBasemap)
B_aff_map
leaflet(B_affinis) %>%
fitBounds(-95, 40 ,-75, 45) %>%
addCircles(~longitude, ~latitude, color="blue") %>%
addProviderTiles(providers$Esri.OceanBasemap)
leaflet(data_1980_500) %>%
fitBounds(-95, 40 ,-75, 45) %>%
addCircles(~longitude, ~latitude, color="blue") %>%
addProviderTiles(providers$Esri.OceanBasemap)
data_1980 <- filter(B_affinis, year >= 1980)
leaflet(data_1980) %>%
fitBounds(-95, 40 ,-75, 45) %>%
addCircles(~longitude, ~latitude, color="blue") %>%
addProviderTiles(providers$Esri.OceanBasemap)
leaflet(data_1980) %>%
fitBounds(-95, 40 ,-74, 45) %>%
addCircles(~longitude, ~latitude, color="blue") %>%
addProviderTiles(providers$Esri.OceanBasemap)
leaflet(data_1980) %>%
fitBounds(-95, 40 ,-70, 45) %>%
addCircles(~longitude, ~latitude, color="blue") %>%
addProviderTiles(providers$Esri.OceanBasemap)
leaflet(data_1980) %>%
fitBounds(-95, 40 ,-71, 45) %>%
addCircles(~longitude, ~latitude, color="blue") %>%
addProviderTiles(providers$Esri.OceanBasemap)
shiny::runApp('C:/Users/mlacey/OneDrive - Defenders of Wildlife/R/ESA_species_USA/ESA_species_USA')
runApp('C:/Users/mlacey/OneDrive - Defenders of Wildlife/R/ESA_species_USA/ESA_species_USA')
runApp('C:/Users/mlacey/OneDrive - Defenders of Wildlife/R/ESA_species_USA/ESA_species_USA')
runApp('C:/Users/mlacey/OneDrive - Defenders of Wildlife/R/ESA_species_USA/ESA_species_USA')
runApp('C:/Users/mlacey/OneDrive - Defenders of Wildlife/R/ESA_species_USA/ESA_species_USA')
setwd("C:/Users/mlacey/defendersr")
ggplot(iris, aes(Sepal.Width, Sepal.Length, color = Species)) +
geom_point(size = 4) +
scale_color_defenders("warm")
library(ggplot2)
library(defendersr)
ggplot(iris, aes(Sepal.Width, Sepal.Length, color = Species)) +
geom_point(size = 4) +
scale_color_defenders("warm")
ggplot(iris, aes(Sepal.Width, Sepal.Length, color = Sepal.Length)) +
geom_point(size = 4, alpha = .6) +
scale_color_defenders(discrete = FALSE, palette = "cool gradient")
ggplot(mpg, aes(manufacturer, fill = manufacturer)) +
geom_bar() +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
scale_fill_defenders(palette = "main", guide = "none")
ggplot(mpg, aes(manufacturer, fill = manufacturer)) +
geom_bar() +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
scale_fill_defenders(palette = "natural", guide = "none")
ggplot(iris, aes(Sepal.Width, Sepal.Length, color = Species)) +
geom_point(size = 4) +
scale_color_defenders("warm")
ggplot(iris, aes(Sepal.Width, Sepal.Length, color = Sepal.Length)) +
geom_point(size = 4, alpha = .6) +
scale_color_defenders(discrete = FALSE, palette = "cool gradient")
ggplot(mpg, aes(manufacturer, fill = manufacturer)) +
geom_bar() +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
scale_fill_defenders(palette = "natural", guide = "none")
setwd("C:/Users/mlacey/viridisLite-master")
ggplot(iris, aes(Sepal.Width, Sepal.Length, color = Species)) +
geom_point(size = 4) +
scale_color_viridis()
library(viridis)
ggplot(iris, aes(Sepal.Width, Sepal.Length, color = Species)) +
geom_point(size = 4) +
scale_color_viridis()
ggplot(iris, aes(Sepal.Width, Sepal.Length, color = Species)) +
geom_point(size = 4) +
scale_fill_viridis()
ggplot(mpg, aes(manufacturer, fill = manufacturer)) +
geom_bar() +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
scale_fill_viridis()
ggplot(mpg, aes(manufacturer, fill = manufacturer)) +
geom_bar() +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
scale_color_viridis()
ggplot(mpg, aes(manufacturer, fill = manufacturer)) +
geom_bar() +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
scale_color_viridis("magma")
ggplot(mpg, aes(manufacturer, fill = manufacturer)) +
geom_bar() +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
scale_color_viridis(option="magma")
ggplot(mpg, aes(manufacturer, fill = manufacturer)) +
geom_bar() +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
scale_color_viridis(option="cvidis")
ggplot(mpg, aes(manufacturer, fill = manufacturer)) +
geom_bar() +
theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
scale_color_viridis(option="viridis")
library(plotly)
p <- plot_ly(
type = 'scatter',
mode='markers',
y=rep(5, 40),
marker=list(
size=seq(0, 39),
color=seq(0, 39),
colorbar=list(
title='Colorbar'
),
colorscale='Viridis',
reversescale =T
)
) %>%
layout(
xaxis = list(
showgrid = F,
zeroline = F
),
yaxis = list(
showgrid = F,
zeroline = F
)
)
p
my_cols <- c("#C3D938", "#772877", "#7C821E", "#D8B98B", "#7A4012")
p <- plot_ly(
type = 'scatter',
mode='markers',
y=rep(5, 40),
marker=list(
size=seq(0, 39),
color=seq(0, 39),
colorbar=list(
title='Colorbar'
),
colorscale='my_cols',
reversescale =T
)
) %>%
layout(
xaxis = list(
showgrid = F,
zeroline = F
),
yaxis = list(
showgrid = F,
zeroline = F
)
)
p
library(defendersr)
p <- plot_ly(
type = 'scatter',
mode='markers',
y=rep(5, 40),
marker=list(
size=seq(0, 39),
color=seq(0, 39),
colorbar=list(
title='Colorbar'
),
colorscale='warm gradient',
reversescale =T
)
) %>%
layout(
xaxis = list(
showgrid = F,
zeroline = F
),
yaxis = list(
showgrid = F,
zeroline = F
)
)
p
p <- plot_ly(
type = 'scatter',
mode='markers',
y=rep(5, 40),
marker=list(
size=seq(0, 39),
color=seq(0, 39),
colorbar=list(
title='Colorbar'
),
colorscale='blues',
reversescale =T
)
) %>%
layout(
xaxis = list(
showgrid = F,
zeroline = F
),
yaxis = list(
showgrid = F,
zeroline = F
)
)
p
my_cols <- c("#7a3777", "#005596")
p <- plot_ly(
type = 'scatter',
mode='markers',
y=rep(5, 40),
marker=list(
size=seq(0, 39),
color=seq(0, 39),
colorbar=list(
title='Colorbar'
),
colorscale='my_cols',
reversescale =T
)
) %>%
layout(
xaxis = list(
showgrid = F,
zeroline = F
),
yaxis = list(
showgrid = F,
zeroline = F
)
)
p
library(defendersr)
plot(dist ~ speed, data=cars, col="warm gradient", pch=19)
setwd("C:/Users/mlacey/defendersr")
setwd("C:/Users/mlacey/CCI-site")
setwd("C:/Users/mlacey/defendersr")
install.packages("devtools")
library(devtools)
devtools::build()
devtools::install()
